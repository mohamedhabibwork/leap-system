# ============================================
# SERVER CONFIGURATION
# ============================================

# Server port (default: 3000)
PORT=3000

# Server host (default: localhost)
HOST=localhost

# Environment: development, production, test
NODE_ENV=development

# Backend API URL (used for callbacks and redirects)
BACKEND_URL=http://localhost:3000

# Frontend URL (used for CORS, email links, redirects)
FRONTEND_URL=http://localhost:3001

# CORS allowed origins (comma-separated or '*' for all)
# Default: '*' if not set
CORS_ORIGIN=*

# ============================================
# DATABASE CONFIGURATION
# ============================================

# Primary PostgreSQL connection string
# Format: postgresql://[user[:password]@][host][:port][/database]
DATABASE_URL=postgresql://postgres:@localhost:5432/leap_lms

# Alternative database connection variables (used as fallback if DATABASE_URL not set)
# These are combined to build the connection string if DATABASE_URL is missing
POSTGRES_URL=
POSTGRES_CONNECTION_STRING=
POSTGRES_USER=postgres
POSTGRES_PASSWORD=
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=leap_lms

# ============================================
# JWT CONFIGURATION
# ============================================

# JWT signing secret (REQUIRED - change in production!)
# Generate with: openssl rand -base64 32
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production

# JWT token expiration time (default: 7d)
# Format: number + unit (s, m, h, d)
JWT_EXPIRATION=7d

# JWT refresh token expiration time (default: 30d)
JWT_REFRESH_EXPIRATION=30d

# ============================================
# KEYCLOAK CONFIGURATION
# ============================================

# Keycloak server URL
KEYCLOAK_URL=https://keycloak.habib.cloud

# Keycloak realm name
KEYCLOAK_REALM=leap-realm

# Keycloak client ID
KEYCLOAK_CLIENT_ID=leap-client

# Keycloak client secret (REQUIRED)
KEYCLOAK_CLIENT_SECRET=Uu2X10TY6rHnGFwenN6vb7aP3fSOrvMV

# Keycloak public key (optional - for token verification)
KEYCLOAK_PUBLIC_KEY=

# Keycloak Admin Configuration (for user/role synchronization)
# Admin URL (optional - falls back to KEYCLOAK_URL if not set)
KEYCLOAK_ADMIN_URL=https://keycloak.habib.cloud

# Admin client ID (default: admin-cli)
KEYCLOAK_ADMIN_CLIENT_ID=admin-cli

# Admin client secret (REQUIRED for admin operations)
KEYCLOAK_ADMIN_CLIENT_SECRET=Uu2X10TY6rHnGFwenN6vb7aP3fSOrvMV

# Admin username (default: admin)
KEYCLOAK_ADMIN_USERNAME=admin

# Admin password (REQUIRED for admin operations)
KEYCLOAK_ADMIN_PASSWORD=admin

# Keycloak Sync Settings
# Enable Keycloak synchronization (default: true)
KEYCLOAK_SYNC_ENABLED=true

# Sync on user create (default: true)
KEYCLOAK_SYNC_ON_CREATE=true

# Sync on user update (default: true)
KEYCLOAK_SYNC_ON_UPDATE=true

# ============================================
# STORAGE CONFIGURATION
# ============================================

# Storage provider: 'minio' or 'r2'
# Only configure the provider you want to use
STORAGE_PROVIDER=minio

# ============================================
# MinIO Configuration (S3-compatible Object Storage)
# ============================================

# MinIO endpoint (default: localhost)
MINIO_ENDPOINT=api-minio.habib.cloud

# MinIO port (default: 9000)
MINIO_PORT=443

# MinIO access key (REQUIRED if using MinIO)
# MinIO username (or use MINIO_ACCESS_KEY for backward compatibility)
MINIO_USERNAME=minioadmin
# MinIO access key (deprecated, use MINIO_USERNAME instead)
MINIO_ACCESS_KEY=minioadmin

# MinIO secret key (REQUIRED if using MinIO)
# MinIO password (or use MINIO_SECRET_KEY for backward compatibility)
MINIO_PASSWORD=minioadmin
# MinIO secret key (deprecated, use MINIO_PASSWORD instead)
MINIO_SECRET_KEY=minioadmin

# Use SSL for MinIO (default: false)
MINIO_USE_SSL=false

# MinIO bucket name (default: leap-lms)
MINIO_BUCKET=leap-lms

# MinIO public URL (for generating public file URLs)
MINIO_PUBLIC_URL=https://console-minio.habib.cloud

# ============================================
# Cloudflare R2 Configuration (Alternative Storage)
# ============================================

# R2 account ID (REQUIRED if using R2)
R2_ACCOUNT_ID=your-cloudflare-account-id

# R2 access key ID (REQUIRED if using R2)
R2_ACCESS_KEY_ID=your-r2-access-key-id

# R2 secret access key (REQUIRED if using R2)
R2_SECRET_ACCESS_KEY=your-r2-secret-access-key

# R2 bucket name (default: leap-lms)
R2_BUCKET=leap-lms

# R2 public URL (optional - for custom domain)
# If not set, presigned URLs will be used
R2_PUBLIC_URL=https://your-custom-domain.com

# ============================================
# FIREBASE / FCM CONFIGURATION
# ============================================

# Firebase project ID (REQUIRED for push notifications)
FIREBASE_PROJECT_ID=AIzaSyCfrg-UmNhOm53jgXXxgd-eJtzh7Yi2K3s

# Firebase service account email (REQUIRED for push notifications)
# Format: firebase-adminsdk-xxxxx@your-project.iam.gserviceaccount.com
FIREBASE_CLIENT_EMAIL=firebase-adminsdk-fbsvc@leap-pm.iam.gserviceaccount.com

# Firebase private key (REQUIRED for push notifications)
# IMPORTANT: Must include escaped newlines (\n)
# Format: "-----BEGIN PRIVATE KEY-----\nYour-Private-Key-Here\n-----END PRIVATE KEY-----\n"
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nMIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQCWkriJzuQS4sKw\n6FGB9jYgy3W/BcVeAkHqyMYNwKa7bryWRlMchi4WdstNQmg79DSf1EwWNtXzlvqh\ndAKtCnzjxjR4zJyVz+a9/LFKO7nr1U8VACrrMCSYGaRt2akAh7h91R3/NfGvI8g0\n62mdJaJ/uRPb8Ji81h1irzhSNbpzfjzNcSZzPQoXSLzw2Glo8zvqn4PnjVwT1Xaf\nlqkUuaG8PbRmomWgdhnb+UOt3HhuPqJJVgu92xIEpmXuiOZjwsV9KJp8oGphc8h3\nrFp+rTk9AyfABPSE4tQcw6TeFCZTf1DdPk8VIRfYt5lMbVEl1rl5wwJT7t3fyMXX\nPai43vrlAgMBAAECggEAHHs3TdXlHU9oTUc8d61HUs+5f38LdLtPlaYRlHNe9nA9\nWt2Fhg05dYVV8lC/36tTMvJYzBDmSnPCB70mbm3f7sPElB779XiEaGZ+cJC4m8vW\n8B1+gMsz+NNM33x+87s4YhDoYihlhV/q1Fu9N/zw7mDnSUCK25lSqKKFMEO6d3Lc\nouaSNcNOPJlN819CFLfNG56fpCEcGXWAKoT7mom5s+BVmEpH+uf2AMGHqrknwhuG\nhOVhmaCQbos8qirUhOf8OFL3ZBk0tzxO3QI0V4F3U4tznSY7j1FlHgjHRHS477dU\ndRVY3l7P/AzsMawB7mfQmnv21EX9gKmi8VsnOJ+g0QKBgQDLKcJATpSRFoOWTEAR\nokKXvjIXWqA0KxmWIQaFDVXBRa/CV4vJozK2XXSnvkZeAnzE3sb74iJE09RYWMxo\nkVR4X8i7yDt8a4EzahYMrmEywqOwmNVWgYgJB74YW9MQzlJdejS2Q4tB3ZrmE6iG\nH4F8S982ieOnEUDIlNEzJZvqOQKBgQC9u50ImlEZLI9IJUG7zLj3nZHGU1C1p/XC\nUqftmk4Ijg32LR4PCtz2LHiPlNQzfF16UveWRoE32dB9Vve8Prwh2DM9G/zqEbkB\nVx+3/yh1GusVYP3FkawBMG19SMBzhljh0zJyEqxpD2IKgvQHsvsBGW8CG1Rv0ixZ\nLVuQryzGDQKBgCdlyLK5ylu8dvYdgUsqISnWC1a2D10ugn63ltEUfe3F+siAO651\nhG8S/n1NC85NQy7WWNYdyzF3trUPO0yH6k6RnJa1xLtjCaITz4TUCCtUzXOAn9Zv\nthayNq34mJyothZEjZZO0OGL/O7jHworb+vPttCXutr6IIsFOPBnOa4ZAoGAf3vH\nONePdE3HfF9kOo6FHgOmxk6G5XgUnlwxb2oF0qO4Z9fK4aqX62TYIQmMR4fhu2Zx\n62w2ONPGzeEYlkjE2izNyNq8Zn5AA9GJg3UTtxO+L2A7Q3vsyePDPbIbdcQohpwE\nwjcf13u5kXyKAX5WP1faidzZMEVU/RqH8sBxYiUCgYBf705CJwtFbZbCCwFg0imB\n2hp/5u4QaUqOFNu2Jm5IlvqXp8mDVC82LWWMh3qvP6SBWu6HRgfLF+RZrIWNmHAy\nUb2B30FoCNMkBkztUScQRZe4ccCZXwy/KYqEIiwBliKSIYtzvVzY4/LY9s5c0l9F\nn3s06jADZPWCi5nSk9J3uQ==\n-----END PRIVATE KEY-----\n"

# ============================================
# EMAIL / SMTP CONFIGURATION
# ============================================

# SMTP server host (REQUIRED for email functionality)
SMTP_HOST=localhost

# SMTP port (default: 587 for TLS, 465 for SSL)
SMTP_PORT=2525

# SMTP username (usually your email address)
SMTP_USER=leap@habib.cloud

# SMTP password (use app-specific password for Gmail)
SMTP_PASSWORD=

# Email sender address
FROM_EMAIL=leap@habib.cloud

# Email sender name
FROM_NAME="LEAP PM"

# ============================================
# gRPC CONFIGURATION
# ============================================

# gRPC server URL (default: 0.0.0.0:5000)
# Format: host:port
GRPC_URL=0.0.0.0:5000

# ============================================
# TWO-FACTOR AUTHENTICATION (TOTP)
# ============================================

# TOTP issuer name (default: LEAP PM)
TOTP_ISSUER="LEAP PM"

# TOTP verification window (default: 1)
# Number of time steps to allow for clock skew
TOTP_WINDOW=1

# ============================================
# SESSION CONFIGURATION
# ============================================

# Maximum concurrent sessions per user (default: 5)
MAX_CONCURRENT_SESSIONS=5

# Session max age in seconds (default: 604800 = 7 days)
SESSION_MAX_AGE=604800

# Remember me session max age in seconds (default: 2592000 = 30 days)
SESSION_MAX_AGE_REMEMBER_ME=2592000

# ============================================
# PAYMENT PROCESSING (PayPal)
# ============================================

# PayPal mode: 'sandbox' or 'live' (default: sandbox)
PAYPAL_MODE=sandbox

# PayPal client ID (REQUIRED for PayPal integration)
PAYPAL_CLIENT_ID=your-paypal-client-id

# PayPal client secret (REQUIRED for PayPal integration)
PAYPAL_CLIENT_SECRET=your-paypal-client-secret
