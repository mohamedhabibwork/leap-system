# ============================================
# APPLICATION CONFIGURATION
# ============================================

# Server
PORT=3000
HOST=localhost

# gRPC Server
GRPC_HOST=0.0.0.0
GRPC_PORT=5000

# Environment
NODE_ENV=development

# ============================================
# SEO & SITE CONFIGURATION (Web App)
# ============================================

# Site Information
NEXT_PUBLIC_SITE_URL=http://localhost:3001
NEXT_PUBLIC_SITE_NAME="LEAP PM"
NEXT_PUBLIC_TWITTER_HANDLE=@leappm

# Search Engine Verification (Optional)
NEXT_PUBLIC_GOOGLE_SITE_VERIFICATION=
NEXT_PUBLIC_BING_VERIFICATION=
NEXT_PUBLIC_YANDEX_VERIFICATION=

# API Configuration for Web App
NEXT_PUBLIC_API_URL=http://localhost:3000
NEXT_PUBLIC_GRPC_WEB_URL=http://localhost:8081

# ============================================
# DATABASE
# ============================================

DATABASE_URL=postgresql://postgres:@localhost:5432/leap_lms

# ============================================
# AUTHENTICATION & AUTHORIZATION
# ============================================

# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRATION=7d
JWT_REFRESH_EXPIRATION=30d

# Keycloak (Authentication Server)
KEYCLOAK_URL=https://keycloak.habib.cloud
KEYCLOAK_REALM=leap-realm
KEYCLOAK_CLIENT_ID=leap-client
KEYCLOAK_CLIENT_SECRET=Uu2X10TY6rHnGFwenN6vb7aP3fSOrvMV
KEYCLOAK_PUBLIC_KEY=

# Keycloak OAuth (Frontend)
KEYCLOAK_ISSUER=https://keycloak.habib.cloud/realms/leap-realm
KEYCLOAK_CLIENT_ID_WEB=leap-client
KEYCLOAK_CLIENT_SECRET_WEB=Uu2X10TY6rHnGFwenN6vb7aP3fSOrvMV

# Keycloak Admin (for user/role synchronization)
# Two authentication methods are supported:
# 1. Client Credentials (Recommended for production - more secure)
#    - Requires: KEYCLOAK_ADMIN_CLIENT_ID and KEYCLOAK_ADMIN_CLIENT_SECRET
#    - Enable "Service accounts roles" in Keycloak client settings
# 2. Password Credentials (Easier for development)
#    - Requires: KEYCLOAK_ADMIN_USERNAME and KEYCLOAK_ADMIN_PASSWORD
#    - Enable "Direct access grants" in Keycloak client settings
KEYCLOAK_ADMIN_URL=https://keycloak.habib.cloud
KEYCLOAK_ADMIN_CLIENT_ID=admin-cli
KEYCLOAK_ADMIN_CLIENT_SECRET=Uu2X10TY6rHnGFwenN6vb7aP3fSOrvMV
KEYCLOAK_ADMIN_USERNAME=admin@habib.cloud
KEYCLOAK_ADMIN_PASSWORD=P@ssword123

# Keycloak Sync Settings
KEYCLOAK_SYNC_ENABLED=true
KEYCLOAK_SYNC_ON_CREATE=true
KEYCLOAK_SYNC_ON_UPDATE=true

# Keycloak SSO & Session Configuration
KEYCLOAK_SSO_ENABLED=true
COOKIE_DOMAIN=                    # Optional: e.g., '.habib.cloud' for subdomain SSO
COOKIE_SECURE=true                # Set to false for local development over HTTP
COOKIE_SAME_SITE=lax             # Options: 'strict', 'lax', 'none'
SESSION_COOKIE_NAME=leap_session
SESSION_MAX_AGE=604800           # 7 days in seconds
SESSION_MAX_AGE_REMEMBER_ME=2592000  # 30 days in seconds
MAX_CONCURRENT_SESSIONS=5

# Keycloak URLs & Redirects
BACKEND_URL=http://localhost:3000
ALLOWED_REDIRECT_URLS=http://localhost:3001,http://localhost:3000

# Token Management
TOKEN_REFRESH_THRESHOLD=300      # Refresh tokens 5 minutes before expiry
TOKEN_REFRESH_INTERVAL=60000     # Background refresh check every 1 minute (deprecated - use TASK_TOKEN_REFRESH_CRON)
SESSION_CLEANUP_INTERVAL=3600000 # Cleanup expired sessions every 1 hour (deprecated - use TASK_SESSION_CLEANUP_CRON)

# ============================================
# TASK SCHEDULING (Cron Jobs)
# ============================================

# Session Cleanup Task
# Runs hourly by default (0 * * * *)
# Cron format: minute hour day month weekday
TASK_SESSION_CLEANUP_CRON=0 * * * *

# Token Refresh Task
# Runs every minute by default (* * * * *)
TASK_TOKEN_REFRESH_CRON=* * * * *

# Ads Tracking Flush Task
# Runs every 30 seconds by default (30000ms)
# Interval in milliseconds
TASK_ADS_FLUSH_INTERVAL=30000

# FCM Token Cleanup Task
# Runs daily at 2 AM UTC by default (0 2 * * *)
TASK_FCM_CLEANUP_CRON=0 2 * * *

# Temporary File Cleanup Task
# Runs every 6 hours by default (0 */6 * * *)
TASK_TEMP_FILE_CLEANUP_CRON=0 */6 * * *

# ============================================
# OAUTH PROVIDERS
# ============================================

# Google OAuth
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret

# GitHub OAuth
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret

# Facebook OAuth
FACEBOOK_CLIENT_ID=your-facebook-client-id
FACEBOOK_CLIENT_SECRET=your-facebook-client-secret

# ============================================
# NEXTAUTH CONFIGURATION
# ============================================

NEXTAUTH_URL=http://localhost:3001
NEXTAUTH_SECRET=your-nextauth-secret-generate-with-openssl-rand-base64-32

# Session Configuration
SESSION_MAX_AGE=604800
SESSION_MAX_AGE_REMEMBER_ME=2592000
MAX_CONCURRENT_SESSIONS=5

# ============================================
# TWO-FACTOR AUTHENTICATION
# ============================================

TOTP_ISSUER=LEAP PM
TOTP_WINDOW=1

# ============================================
# MESSAGE QUEUES & EVENT STREAMING
# ============================================

# RabbitMQ (Task Queue)
RABBITMQ_URL=amqp://guest:guest@localhost:5672
RABBITMQ_HOST=localhost
RABBITMQ_PORT=5672
RABBITMQ_USER=guest
RABBITMQ_PASSWORD=guest

# Kafka (Event Streaming)
KAFKA_BROKERS=localhost:9092
KAFKA_CLIENT_ID=leap-lms-backend
KAFKA_GROUP_ID=leap-lms-group

# Redis (Caching & Sessions)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ============================================
# STORAGE & MEDIA
# ============================================

# Storage Provider (options: local, minio, r2, s3)
STORAGE_PROVIDER=minio

# MinIO (S3-compatible Object Storage)
MINIO_ENDPOINT=localhost
MINIO_PORT=9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_USE_SSL=false
MINIO_BUCKET=leap-lms
MINIO_PUBLIC_URL=http://localhost:9000

# Cloudflare R2 (Alternative Storage)
R2_ACCOUNT_ID=your-cloudflare-account-id
R2_ACCESS_KEY_ID=your-r2-access-key-id
R2_SECRET_ACCESS_KEY=your-r2-secret-access-key
R2_BUCKET=leap-lms
R2_PUBLIC_URL=https://your-custom-domain.com

# AWS S3 (Alternative Storage)
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your-aws-access-key-id
AWS_SECRET_ACCESS_KEY=your-aws-secret-access-key
AWS_S3_BUCKET=leap-lms
AWS_S3_PUBLIC_URL=

# ============================================
# PAYMENT PROCESSING
# ============================================

# PayPal
PAYPAL_MODE=sandbox
PAYPAL_CLIENT_ID=your-paypal-sandbox-client-id
PAYPAL_CLIENT_SECRET=your-paypal-sandbox-secret

# Stripe (if used)
STRIPE_SECRET_KEY=sk_test_your-stripe-secret-key
STRIPE_PUBLISHABLE_KEY=pk_test_your-stripe-publishable-key
STRIPE_WEBHOOK_SECRET=whsec_your-webhook-secret

# ============================================
# EMAIL SERVICE
# ============================================

# SMTP Configuration
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_SECURE=false

# Email Sender Info
FROM_EMAIL=noreply@habib.cloud
FROM_NAME=LEAP PM

# ============================================
# PUSH NOTIFICATIONS
# ============================================

# Firebase Cloud Messaging (FCM)
FIREBASE_PROJECT_ID=your-firebase-project-id
FIREBASE_CLIENT_EMAIL=firebase-adminsdk@your-project.iam.gserviceaccount.com
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYour-Private-Key-Here\n-----END PRIVATE KEY-----\n"

# Firebase Admin SDK JSON (alternative to individual fields)
FIREBASE_SERVICE_ACCOUNT_PATH=./config/firebase-service-account.json

# ============================================
# FRONTEND INTEGRATION
# ============================================

# Frontend URL (for email links, CORS, etc.)
FRONTEND_URL=http://localhost:3001

# CORS Configuration
# IMPORTANT: Do not use '*' wildcard when CORS_CREDENTIALS=true
# Use specific origins separated by commas
# Example: CORS_ORIGIN=http://localhost:3001,http://localhost:3000
CORS_ORIGIN=http://localhost:3001
CORS_CREDENTIALS=true

# ============================================
# MONITORING & LOGGING
# ============================================

# Logging
LOG_LEVEL=debug
LOG_FILE_PATH=./logs/app.log

# Sentry (Error Tracking)
SENTRY_DSN=
SENTRY_ENVIRONMENT=development

# ============================================
# THIRD-PARTY INTEGRATIONS
# ============================================

# Google APIs (if used)
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_CALLBACK_URL=http://localhost:3000/auth/google/callback

# Facebook OAuth (if used)
FACEBOOK_APP_ID=
FACEBOOK_APP_SECRET=
FACEBOOK_CALLBACK_URL=http://localhost:3000/auth/facebook/callback

# LinkedIn OAuth (if used)
LINKEDIN_CLIENT_ID=
LINKEDIN_CLIENT_SECRET=
LINKEDIN_CALLBACK_URL=http://localhost:3000/auth/linkedin/callback

# Zoom Integration (for live sessions)
ZOOM_API_KEY=
ZOOM_API_SECRET=
ZOOM_WEBHOOK_SECRET=

# ============================================
# RATE LIMITING & SECURITY
# ============================================

# Rate Limiting
RATE_LIMIT_TTL=60
RATE_LIMIT_MAX=100

# Security
BCRYPT_ROUNDS=10
SESSION_SECRET=your-session-secret-change-this

# ============================================
# FEATURE FLAGS
# ============================================

# Enable/Disable Features
ENABLE_GRAPHQL=true
ENABLE_WEBSOCKETS=true
ENABLE_SWAGGER=true
ENABLE_RATE_LIMITING=true
ENABLE_COMPRESSION=true

# ============================================
# DEVELOPMENT & TESTING
# ============================================

# Debug Mode
DEBUG=false
VERBOSE_LOGGING=false

# Database Seeding
AUTO_SEED_DATABASE=false

# Testing
TEST_DATABASE_URL=postgresql://postgres:@localhost:5432/leap_lms_test
